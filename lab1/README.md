# Лабораторная работа №1
## Разработка консольного чата на сокетах
`server.py` - серверное приложение;
`сlient.py` - приложение-клиент;
`custom_colors.py` - файл с конструкциями для форматирования текста на вывод;

###  Описание протокола
Приложения клиентов и сервера обмениваются между собой сообщениями следующего вида:
1. Заголовок -- начальная часть сообщения фиксированной длины (10 символов), которая содержит в себе информацию о длине сообщения;

2. Содержимое -- оставшаяся часть сообщения, ограничения на минимальную/максимальную длину отсутствуют, может содержать в себе либо служебную информацию от сервера, либо сообщение от другого клиента.
    1. Сообщение от клиента содержит время отправки, никнейм отправителя и текст сообщения. Эти части разделяются с помощью непечатного (при использовании Python3) символа `'\0'` на этапе финальном этапе перед отправкой сообщения.
    2. Служебное сообщение состоит из одной части, не содержит времени/никнейма.
    
В начале работы клиентсокого приложения запрашивается никнейм на ввод,
который после успешного подключения к серверу сразу же отправляется сообщением.
Если сервер успешно обрабатывает поступившее подключение,
то пользователю отправляется welcome-message с информацией о способе корректного выхода (ввод `"<quit<"`).
После этого все введенные сообщения будут отправлены в чат (кроме пустых строк).

Программа-сервер обрабатывает запросы от нескольких клиентов в многопоточном режиме. При подключении каждого
нового клиента для него создается отдельный поток-демон, в котором и происходит обработка сообщений от пользователя.

Для завершения работы пользователь может либо ввести комбинацию для выхода, либо аварийно завершить с помощью `"Ctrl+C"`.
В обоих случаях программа-клиент завершается без ошибок, а программа-сервер корректно обрабатывает эти ситуации
и не прерыввает свою работу. Завершение работы сервера происходит при нажатии `"Ctrl+C"`.
В этом случае программа-сервер обрабатывает запрос на остановку работы, рассылает всем клиентам уведомление о завершении
работы сервера, закрывает серверный и все клиентские сокеты. Завершается работа закрытием основного потока,
которое приводит к остановке всех клиентских потоков-демонов. 

Улучшение читабельности достигается за счет добавления форматирования текста.
Серверные сообщения выводятся красным цветом и жирным шрифтом. 
Цвет фрагментов со временем отправления и текста пользовательского сообщения не меняется,
никней всегда подсвечивается случайным цветом.

Работа со временем происходит только на стороне клиента. 
При отправке сообщения дата + время + часовой пояс добавляются в его начало, 
а при получении и распаковке сообщения время переводится в часовой пояс получателя с помощью библиотек `pytz`, `tzlocal`



